# Name of the plugin.
name=Coulomb Counter
category=Utility

# This plugin is packaged separately
released=coulomb

# Any string is allowable here.  Generally it is either: Production Ready, Test Tool, or Extension Needed
qualityString=Test Tool
# This must be one of the following:  productionReady, testTool, extensionNeeded
quality=testTool

# Description of the plugin.
description=Approximates energy consumption by keeping time spent in different device states.

providedApis=coulomb-counter
requiredPlugins=hal-library, coexistence
api.coulomb-counter.header=coulomb-counter.h

# List of .c files that need to be compiled and linked in.
sourceFiles=coulomb-counter.c, coulomb-counter-cli.c

# List of callbacks implemented by this plugin
implementedCallbacks=coexCoulombCounterEventCallback, halSleepCallback, emberAfPluginEepromStateChangeCallback

# Turn this on by default
includedByDefault=false

options=energyConsumptionWhileAsleep, energyConsumptionWhileIdle, energyConsumptionWhileAwake, energyConsumptionWhileTx, energyConsumptionWhileRx, eepromUninitialized, eepromShutdown, eepromInitialized, eepromWriting, eepromReading, eepromErasing, triggerThreshold, tokenSaveInterval

energyConsumptionWhileAsleep.name=Energy Consumption while Asleep
energyConsumptionWhileAsleep.description=Device current draw while asleep
energyConsumptionWhileAsleep.type=NUMBER:1,1024000
energyConsumptionWhileAsleep.default=0

energyConsumptionWhileIdle.name=Current Draw while Idle
energyConsumptionWhileIdle.description=Device current draw while idle
energyConsumptionWhileIdle.type=NUMBER:1,1024000
energyConsumptionWhileIdle.default=0

energyConsumptionWhileAwake.name=Current Draw while Awake
energyConsumptionWhileAwake.description=Device current draw while awake
energyConsumptionWhileAwake.type=NUMBER:1,1024000
energyConsumptionWhileAwake.default=0

energyConsumptionWhileTx.name=Current Draw while transmitting
energyConsumptionWhileTx.description=Device current draw while transmitting
energyConsumptionWhileTx.type=NUMBER:1,1024000
energyConsumptionWhileTx.default=0

energyConsumptionWhileRx.name=Current Draw while Receiving
energyConsumptionWhileRx.description=Device current draw while receiving
energyConsumptionWhileRx.type=NUMBER:1,1024000
energyConsumptionWhileRx.default=0

eepromUninitialized.name=EEPROM current draw while uninitialized
eepromUninitialized.description=Device current draw when EEPROM is uninitialized
eepromUninitialized.type=NUMBER:1,1024000
eepromUninitialized.default=0

eepromShutdown.name=EEPROM current draw while shutdown
eepromShutdown.description=Device current draw when EEPROM is shutdown
eepromShutdown.type=NUMBER:1,1024000
eepromShutdown.default=0

eepromInitialized.name=EEPROM current draw while initialized
eepromInitialized.description=Device current draw when EEPROM is initialized
eepromInitialized.type=NUMBER:1,1024000
eepromInitialized.default=0

eepromWriting.name=EEPROM current draw while writing
eepromWriting.description=Device current draw when EEPROM is writing
eepromWriting.type=NUMBER:1,1024000
eepromWriting.default=0

eepromReading.name=EEPROM current draw while reading
eepromReading.description=Device current draw when EEPROM is reading
eepromReading.type=NUMBER:1,1024000
eepromReading.default=0

eepromErasing.name=EEPROM current draw while erasing
eepromErasing.description=Device current draw when EEPROM is erasing
eepromErasing.type=NUMBER:1,1024000
eepromErasing.default=0

triggerThreshold.name=Trigger Threshold
triggerThreshold.description=Threshold at which to trigger the plugin callback
triggerThreshold.type=NUMBER:1,524288000
triggerThreshold.default=0

tokenSaveInterval.name=Token Save Interval (s)
tokenSaveInterval.description=The current energy usage will be stored to NVM at this interval
tokenSaveInterval.type=NUMBER:1,4294967
tokenSaveInterval.default=3600

setup(token) {
  files=coulomb-counter-tokens.h
}

setup(bookkeeping) {
  init=emberAfPluginCoulombCounterInit
  tick=emberAfPluginCoulombCounterTick
}

setup(additionalFiles) {
  PATH(ABSOLUTE):$ZIGBEE/app/framework/plugin/coulomb-counter
}
